---
const { isLoggedIn } = Astro.locals;
---

<section class="text-center py-20 bg-gray-100 p-2">
  <h1 class="text-6xl font-bold mb-2">Task Manager</h1>
  <p class="text-3xl text-gray-600">
    Manage your tasks efficiently and stay organized.
  </p>
  <div class="mt-4 space-x-2 flex justify-center items-center max-w-sm mx-auto">
    <a href="#get-started">
      <button class="bg-blue-500 text-white px-4 py-2 rounded-3xl text-2xl"
        >Get Started</button
      >
    </a>
    {
      !isLoggedIn ? (
        <a href="/sign-in">
          <button class="bg-white text-black/80 px-4 py-2 rounded-3xl text-2xl">
            Sign In
          </button>
        </a>
      ) : (
        <button
          id="logout"
          class="bg-black text-white px-4 py-2 rounded-3xl text-2xl hover:bg-gray-800"
        >
          log out
        </button>
      )
    }
  </div>
</section>

<script>
  import { actions } from 'astro:actions';

  const logoutButton = document.querySelector('#logout') as HTMLButtonElement;

  logoutButton.addEventListener('click', async () => {
    console.log('logout');
    const { error } = await actions.signOut();
    if (!error) window.location.replace('/sign-in');
  });
</script>
